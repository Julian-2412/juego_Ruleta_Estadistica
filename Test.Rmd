---
title: "Análisis Estadístico de la Ruleta: ¿Por qué invertir en acciones de Betplay?"
author: "Carlos Mateo vera |
Juan José Calderon |
Julian Prada"
date: "`r Sys.Date()`"
output: 
  html_document: 
    theme: yeti                # Opciones: default, journal, yeti, cerulean, darkly
    toc: TRUE                     # incluir table of contents (true/false)
    toc_float: TRUE               # toc flotante a la izquierda (true/false)
    number_sections: TRUE         # numerar secciones y subsecciones (true/false)
    code_folding: show            # por defecto el código aparecerá oculto: show/hide
lang: es-ES
---


# La Ruleta
La ruleta es un juego de azar icónico en los casinos, conocido tanto por su simplicidad como por su capacidad de ofrecer emocionantes ganancias.Su diseño consta de un disco giratorio dividido en casillas numeradas y de diferentes colores, junto con una bola que gira en sentido opuesto. El número y color en el que se detenga la bola determinan el resultado del juego.

En la ruleta, los jugadores colocan fichas en la mesa para apostar en función de sus predicciones sobre el resultado del giro. Existen diferentes tipos de apuestas, clasificadas en apuestas internas y apuestas externas, cada una con sus propias probabilidades y pagos.

## Tipos de Ruleta
* **Ruleta Europea**: Consta de 37 casillas numeradas del 0 al 36. La casilla "0" es v erde, mientras que las demás se alternan entre rojo y negro.
* **Ruleta Americana**: Similar a la europea, pero incluye una casilla adicional, el "00", lo que eleva el total a 38 casillas.


1. **Apuestas Internas**
Estas apuestas se colocan directamente en los números individuales o en combinaciones específicas dentro del área numerada de la mesa. Ofrecen pagos altos, pero tienen menor probabilidad de éxito:
* Pleno (Straight-Up): Apostar a un solo número. Pago: 35 a 1.
* Dividida (Split): Apostar a dos números adyacentes. Pago: 17 a 1.
* Calle (Street): Apostar a tres números consecutivos en una fila horizontal. Pago: 11 a 1.
* Esquina (Corner): Apostar a cuatro números que forman un cuadrado. Pago: 8 a 1.
* Línea (Line): Apostar a seis números consecutivos en dos filas adyacentes. Pago: 5 a 1.
2. **Apuestas Externas**
Estas apuestas cubren grupos más amplios de números, lo que las hace menos arriesgadas, pero con pagos más bajos:
* Rojo/Negro: Apostar al color del número ganador. Pago: 1 a 1.
* Par/Impar: Apostar a si el número será par o impar. Pago: 1 a 1.
* Alta/Baja: Apostar si el número estará entre 1-18 (bajo) o 19-36 (alto). Pago: 1 a 1.
* Docena: Apostar a uno de los tres grupos de 12 números (1-12, 13-24, 25-36). Pago: 2 a 1.
* Columna: Apostar a una de las tres columnas verticales de números. Pago: 2 a 1.

## La ventaja del Casino
La ventaja del casino proviene de la presencia del cero (0) y, en la ruleta americana, del doble cero (00). 

Por ejenplo, en una apuesta a rojo/negro, hay 18 resultados favorables y 19 resultados desfavorables en la ruleta europea (incluyendo el 0).Esto hace que la probabilidad no sea exactamente 50%, garantizando así que, a largo plazo, el casino tenga una ganancia fija.


Esta ventaja se puede calcular porcentualmente como:

<<<<<<< HEAD

=======
- **Ruleta Europea**:  
  \[
  \text{Ventaja} = \frac{1}{37} \approx 2.7\%
  \]

- **Ruleta Americana**:  
  \[
  \text{Ventaja} = \frac{2}{38} \approx 5.26\%
  \]


# La Ruleta como Distribución Binomial

La ruleta puede modelarse como una distribución binomial en ciertos tipos de apuestas, especialmente en aquellas donde el resultado de cada jugada es un evento con dos resultados posibles: ganar o perder. Esto se puede observar en las apuestas de dinero par, como Rojo/Negro, Par/Impar, y 1-18/19-36. Estas apuestas tienen solo dos resultados posibles (ganar o perder), lo que las hace aptas para modelarse con la distribución binomial.


## Concepto de distribución Binomial
La distribución binomial describe el número de éxitos (eventos favorables) en una secuencia de ensayos independientes, cuando la probabilidad de éxito en cada ensayo es constante. En términos matemáticos, se define como:

\begin{equation} 
  f\left(k\right) = \binom{n}{k} p^k\left(1-p\right)^{n-k} \hspace{1cm} (Ec. 1)
\end{equation}

## Apuestas con distribución binomial
Para una apuesta de dinero par (como Rojo/Negro), el éxito se define como ganar la apuesta, y el fracaso como perderla. Veamos cómo se aplica la distribución binomial:

1. Número de ensayos (n): El número de giros de la ruleta o jugadas que se realizan. 
2. Probabilidad de éxito (p): La probabilidad de que la apuesta salga ganadora en una jugada.

* Para la ruleta europea, la probabilidad de ganar una apuesta en Rojo/Negro es 
$$
P_{\text{ganar}} = \frac{18}{37}
$$
* Para la ruleta americana, la probabilidad de ganar una apuesta en Rojo/Negro es

$$
P_{\text{ganar}} = \frac{18}{38}
$$
  
3. Número de éxitos (X): El número de veces que se gana la apuesta. Esto es lo que queremos modelar y contar.

## Valor Esperado de una apuesta
  El objetivo de jugar a la ruleta es aprovechar el azar para obtener ganancias, lo que en teoría parece una forma "sencilla" de ganar dinero. Sin embargo, antes de jugar, es fundamental analizar cuán rentable es una apuesta desde el punto de vista estadístico. Para esto, calculamos la **ganancia esperada**, una medida que nos indica cuánto dinero podemos ganar o perder, en promedio, por cada apuesta realizada.

El concepto de **valor esperado** se aplica a una variable aleatoria, en este caso, la ganancia obtenida en una apuesta. Para ilustrarlo, tomemos el ejemplo de una apuesta simple como jugar al **rojo/negro** en la ruleta americana.

El valor esperado \( E(X) \) se calcula como:

\[
E(X) = (1) \cdot P(\text{ganar}) + (-1) \cdot P(\text{perder})
\]

Donde:
- \( P(\text{ganar}) = \frac{18}{38} \): probabilidad de ganar.
- \( P(\text{perder}) = \frac{20}{38} \): probabilidad de perder.

Sustituyendo los valores:

\[
E(X) = \frac{18}{38} - \frac{20}{38} = -\frac{2}{38} = -0.0526
\]

En promedio, el jugador pierde aproximadamente 0.0526 unidades por cada apuesta, es decir, el 5.26% de la cantidad apostada. Este resultado refleja la ventaja estadística del casino.


## Simulación en R
En esta sección, se describe el proceso de simulación en R, incluyendo las reglas de la ruleta francesa y la implementación del modelo.

### Configuración Inicial 
En esta parte, configuramos el entorno de trabajo y definimos los parámetros clave para la simulación:

``` {r setup_inicial}
# Configuración básica
set.seed(123)  # Para reproducibilidad
ruleta <- 0:36  # Números posibles en la ruleta

# Apuestas seleccionadas
# Dos columnas (1-34 y 2-35) y dos docenas (1-12 y 13-24)
columnas <- list(c(1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34),
                 c(2, 5, 8, 11, 14, 17, 20, 23, 26, 29, 32, 35))
docenas <- list(1:12, 13:24)

# Pagos de la ruleta
pago_columna <- 2   # 2:1 en columnas
pago_docena <- 2    # 2:1 en docenas

```


``` {r simulacion-giro}
# Función para simular un giro y calcular resultados
  simular_giro <- function() {
  resultado <- sample(ruleta, size = 1)  # Número aleatorio de la ruleta

  # Evaluar si el resultado cae en las apuestas seleccionadas
  gana_columna <- sum(sapply(columnas, function(col) resultado %in% col))
  gana_docena <- sum(sapply(docenas, function(doc) resultado %in% doc))
  
  #definimos el valor de apuesta total
  apuesta_total <- 2
  # Calcular ganancias totales
  ganancias <- (gana_columna * pago_columna) + (gana_docena * pago_docena)
  
  return(list(resultado = resultado, ganancias = ganancias))
}

# Prueba de la función
simular_giro()

```


```{r simulacion-rondas}
# Función para simular varias rondas
simular_rondas <- function(n_rondas) {
  resultados <- replicate(n_rondas, simular_giro(), simplify = FALSE)
  data.frame(
    Ronda = 1:n_rondas,
    Resultado = sapply(resultados, function(x) x$resultado),
    Ganancias = sapply(resultados, function(x) x$ganancias)
  )
}

# Simular 1000 rondas
rondas <- simular_rondas(1000)
head(rondas)

```

#### **4. Análisis de resultados**
Analiza las ganancias totales y promedio.

### Análisis de resultados

```{r analisis-resultados-ganancias}
summary(rondas$Ganancias)
table(rondas$Ganancias)
# Cálculo de estadísticas básicas
ganancia_total <- sum(rondas$Ganancias)
ganancia_promedio <- mean(rondas$Ganancias)

cat("Ganancia total:", ganancia_total, "\n")
cat("Ganancia promedio por ronda:", ganancia_promedio, "\n")

library(ggplot2)
ggplot(rondas, aes(x = Ganancias)) +
  geom_histogram(binwidth = 1, fill = "blue", color = "black", alpha = 0.7) +
  labs(title = "Distribución de Ganancias por Ronda", x = "Ganancias", y = "Frecuencia") +
  theme_minimal()


```



